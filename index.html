<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Ø´Ù‡Ø²Ø§Ø¯ Ø§Ø³ØªØ§ÛŒÙ„ - ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù„Ø¨Ø§Ø³ Ú©ÙˆØ¯Ú© Ùˆ Ù…Ø§Ø¯Ø±</title>
    <meta name="description" content="ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ù†Ù„Ø§ÛŒÙ† Ù„Ø¨Ø§Ø³ Ú©ÙˆØ¯Ú© Ùˆ Ù…Ø§Ø¯Ø± - Ø¨Ù‡ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ø¨Ø§ Ù‚ÛŒÙ…Øª Ù…Ù†Ø§Ø³Ø¨">
    <meta name="theme-color" content="#667eea">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIti02YfYstin2K8g2KfYs9iq2KfbjNmEIiwKICAic2hvcnRfbmFtZSI6ICLYtNmH2LLYp9ivIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJ0aGVtZV9jb2xvciI6ICIjNjY3ZWVhIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMDAgMTAwJyUzRSUzQ3RleHQgeT0nLjllbScgZm9udC1zaXplPSc5MCclM0Uc2LnRlDwvdGV4dCUzRSUzQy9zdmclM0UiLAogICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Vazirmatn', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            overscroll-behavior-y: contain;
            user-select: none;
            -webkit-user-select: none;
        }
        
        input, textarea {
            user-select: text;
            -webkit-user-select: text;
        }
        
        .app-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
        }
        
        .screen {
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        .screen.active {
            display: block;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .btn {
            transition: all 0.2s;
            touch-action: manipulation;
        }
        
        .btn:active {
            transform: scale(0.95);
        }
        
        .product-card {
            transition: all 0.3s;
        }
        
        .product-card:active {
            transform: scale(0.98);
        }
        
        .header-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .floating-btn {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 999;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }
        
        .badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 12px;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: 700;
        }
        
        .progress-bar {
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: white;
            transition: width 0.3s;
        }
        
        .input-group {
            position: relative;
            margin-bottom: 20px;
        }
        
        .input-group input,
        .input-group textarea,
        .input-group select {
            width: 100%;
            padding: 14px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .input-group input:focus,
        .input-group textarea:focus,
        .input-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .color-picker {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }
        
        .color-option {
            padding: 12px;
            border: 3px solid transparent;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .color-option.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .size-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .size-option {
            padding: 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .size-option.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .size-option.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .invoice {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .invoice-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .invoice-row.total {
            border-bottom: none;
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
        }
        
        .admin-stat {
            background: white;
            padding: 20px;
            border-radius: 16px;
            margin: 12px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .order-item {
            background: white;
            padding: 16px;
            border-radius: 12px;
            margin: 12px 0;
            border-left: 4px solid #667eea;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-confirmed { background: #d1fae5; color: #065f46; }
        .status-rejected { background: #fee2e2; color: #991b1b; }
        
        .file-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }
        
        .file-upload input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .upload-preview {
            max-width: 100%;
            border-radius: 12px;
            margin-top: 12px;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding: 12px;
            display: flex;
            justify-content: space-around;
            z-index: 100;
        }
        
        .nav-item {
            text-align: center;
            padding: 8px 16px;
            border-radius: 12px;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .nav-item.active {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }
        
        .install-prompt {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 16px 24px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                transform: translateX(-50%) translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlide 0.3s ease;
        }
        
        @keyframes modalSlide {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .shipping-option, .post-option {
            cursor: pointer;
            transition: all 0.2s;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
        <div id="homeScreen" class="screen active">
            <div class="header-gradient text-white p-6 pb-32">
                <div class="flex items-center justify-between mb-6">
                    <div onclick="adminClickCounter()" id="adminSecretBtn">
                        <h1 class="text-2xl font-bold">ğŸ‘‘ Ø´Ù‡Ø²Ø§Ø¯ Ø§Ø³ØªØ§ÛŒÙ„</h1>
                        <p class="text-sm opacity-90 mt-1">ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù„Ø¨Ø§Ø³ Ú©ÙˆØ¯Ú© Ùˆ Ù…Ø§Ø¯Ø±</p>
                    </div>
                    <button onclick="showScreen('profileScreen')" class="relative">
                        <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center">
                            <span class="text-2xl">ğŸ‘¤</span>
                        </div>
                        <div id="vipBadge" class="badge hidden">VIP</div>
                    </button>
                </div>
                
                <div class="bg-white/20 backdrop-blur-sm rounded-2xl p-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm">ğŸ’ Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§</span>
                        <span class="text-xl font-bold" id="userPoints">0</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="vipProgress" style="width: 0%"></div>
                    </div>
                    <p class="text-xs mt-2 opacity-90" id="vipStatus">ØªØ§ VIP Ø´Ø¯Ù†: 10,000,000 ØªÙˆÙ…Ø§Ù†</p>
                </div>
            </div>
            
            <div class="bg-white rounded-t-3xl -mt-24 p-6 min-h-screen">
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <button onclick="showScreen('shopScreen')" class="bg-gradient-to-br from-purple-500 to-indigo-600 text-white p-6 rounded-2xl shadow-lg btn">
                        <div class="text-4xl mb-2">ğŸ›</div>
                        <div class="font-bold">Ø®Ø±ÛŒØ¯ Ù…Ø­ØµÙˆÙ„</div>
                    </button>
                    
                    <button onclick="showScreen('trackScreen')" class="bg-gradient-to-br from-blue-500 to-cyan-600 text-white p-6 rounded-2xl shadow-lg btn">
                        <div class="text-4xl mb-2">ğŸ“¦</div>
                        <div class="font-bold">Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø³ÙØ§Ø±Ø´</div>
                    </button>
                    
                    <button onclick="showScreen('discountScreen')" class="bg-gradient-to-br from-pink-500 to-rose-600 text-white p-6 rounded-2xl shadow-lg btn">
                        <div class="text-4xl mb-2">ğŸ’³</div>
                        <div class="font-bold">Ú©Ø¯ ØªØ®ÙÛŒÙ</div>
                    </button>
                    
                    <button onclick="showScreen('supportScreen')" class="bg-gradient-to-br from-green-500 to-emerald-600 text-white p-6 rounded-2xl shadow-lg btn">
                        <div class="text-4xl mb-2">â˜ï¸</div>
                        <div class="font-bold">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</div>
                    </button>
                </div>
                
                <div class="bg-gradient-to-r from-orange-100 to-pink-100 p-4 rounded-2xl mb-20">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-700 mb-1">ğŸ“¢ Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù… Ù…Ø§</p>
                            <p class="font-bold text-gray-800">@shahzad_style</p>
                        </div>
                        <a href="https://t.me/shahzad_style" target="_blank" class="bg-white px-4 py-2 rounded-xl text-sm font-bold text-purple-600 btn">
                            Ø¹Ø¶ÙˆÛŒØª
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- ØµÙØ­Ù‡ Ø®Ø±ÛŒØ¯ -->
        <div id="shopScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="showScreen('homeScreen')" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold">Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø­ØµÙˆÙ„</h2>
                </div>
                
                <div class="p-4 pb-24">
                    <div id="productList" class="space-y-4"></div>
                </div>
            </div>
        </div>
        <!-- ØµÙØ­Ù‡ Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­ØµÙˆÙ„ -->
        <div id="productDetailScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="showScreen('shopScreen')" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold" id="productDetailTitle">Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­ØµÙˆÙ„</h2>
                </div>
                
                <div class="p-4 pb-24">
                    <!-- Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø§ÛŒØ² -->
                    <div class="mb-6">
                        <h3 class="text-lg font-bold mb-3">ğŸ“ Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø§ÛŒØ²</h3>
                        <div id="sizeGrid" class="size-grid"></div>
                    </div>
                    
                    <!-- Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ú¯ -->
                    <div class="mb-6">
                        <h3 class="text-lg font-bold mb-3">ğŸ¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø±Ù†Ú¯</h3>
                        <div class="color-picker">
                            <div class="color-option" onclick="selectColor('Ø³ÙÛŒØ¯', this)">
                                <div class="text-3xl mb-1">âšª</div>
                                <div class="text-sm">Ø³ÙÛŒØ¯</div>
                            </div>
                            <div class="color-option" onclick="selectColor('Ù…Ø´Ú©ÛŒ', this)">
                                <div class="text-3xl mb-1">âš«</div>
                                <div class="text-sm">Ù…Ø´Ú©ÛŒ</div>
                            </div>
                            <div class="color-option" onclick="selectColor('Ø¢Ø¨ÛŒ', this)">
                                <div class="text-3xl mb-1">ğŸ”µ</div>
                                <div class="text-sm">Ø¢Ø¨ÛŒ</div>
                            </div>
                            <div class="color-option" onclick="selectColor('Ù‚Ø±Ù…Ø²', this)">
                                <div class="text-3xl mb-1">ğŸ”´</div>
                                <div class="text-sm">Ù‚Ø±Ù…Ø²</div>
                            </div>
                            <div class="color-option" onclick="selectColor('Ø²Ø±Ø¯', this)">
                                <div class="text-3xl mb-1">ğŸŸ¡</div>
                                <div class="text-sm">Ø²Ø±Ø¯</div>
                            </div>
                            <div class="color-option" onclick="selectColor('Ø¨Ù†ÙØ´', this)">
                                <div class="text-3xl mb-1">ğŸŸ£</div>
                                <div class="text-sm">Ø¨Ù†ÙØ´</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ù†ÙˆØ¹ Ø¯ÙˆØ®Øª -->
                    <div class="mb-6">
                        <h3 class="text-lg font-bold mb-3">âš¡ Ù†ÙˆØ¹ Ø¯ÙˆØ®Øª</h3>
                        <div class="space-y-3">
                            <div class="border-2 rounded-xl p-4 cursor-pointer shipping-option" onclick="selectShipping('Ø¹Ø§Ø¯ÛŒ', 0, this)">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-bold">ğŸ¢ Ø¹Ø§Ø¯ÛŒ</div>
                                        <div class="text-sm text-gray-600">7-10 Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ</div>
                                    </div>
                                    <div class="font-bold text-green-600">Ø±Ø§ÛŒÚ¯Ø§Ù†</div>
                                </div>
                            </div>
                            <div class="border-2 rounded-xl p-4 cursor-pointer shipping-option" onclick="selectShipping('ÙÙˆØ±ÛŒ', 100000, this)">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-bold">âš¡ ÙÙˆØ±ÛŒ</div>
                                        <div class="text-sm text-gray-600">3-5 Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ</div>
                                    </div>
                                    <div class="font-bold text-purple-600">+100,000 Øª</div>
                                </div>
                            </div>
                            <div class="border-2 rounded-xl p-4 cursor-pointer shipping-option" onclick="selectShipping('Ø³ÙˆÙ¾Ø±ÙÙˆØ±ÛŒ', 200000, this)">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-bold">ğŸš€ Ø³ÙˆÙ¾Ø± ÙÙˆØ±ÛŒ</div>
                                        <div class="text-sm text-gray-600">1-2 Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ</div>
                                    </div>
                                    <div class="font-bold text-red-600">+200,000 Øª</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ù†ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„ -->
                    <div class="mb-6">
                        <h3 class="text-lg font-bold mb-3">ğŸ“® Ù†ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„</h3>
                        <div class="space-y-3">
                            <div class="border-2 rounded-xl p-4 cursor-pointer post-option" onclick="selectPost('Ù¾Ø³Øª', 80000, this)">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-bold">ğŸ“® Ù¾Ø³Øª Ù…Ø¹Ù…ÙˆÙ„ÛŒ</div>
                                        <div class="text-sm text-gray-600">5-7 Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ</div>
                                    </div>
                                    <div class="font-bold text-gray-700">80,000 Øª</div>
                                </div>
                            </div>
                            <div class="border-2 rounded-xl p-4 cursor-pointer post-option" onclick="selectPost('ØªÛŒÙ¾Ø§Ú©Ø³', 0, this)">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-bold">ğŸšš ØªÛŒÙ¾Ø§Ú©Ø³</div>
                                        <div class="text-sm text-gray-600">2-3 Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ</div>
                                    </div>
                                    <div class="font-bold text-green-600">Ø±Ø§ÛŒÚ¯Ø§Ù†</div>
                                </div>
                            </div>
                            <div class="border-2 rounded-xl p-4 cursor-pointer post-option" onclick="selectPost('Ù¾ÛŒÚ©', 150000, this)">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-bold">ğŸ Ù¾ÛŒÚ© Ù…ÙˆØªÙˆØ±ÛŒ</div>
                                        <div class="text-sm text-gray-600">ÙÙ‚Ø· ØªÙ‡Ø±Ø§Ù† - Ø§Ù…Ø±ÙˆØ²</div>
                                    </div>
                                    <div class="font-bold text-orange-600">150,000 Øª</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button onclick="continueToMeasurements()" class="floating-btn bg-purple-600 text-white px-8 py-4 rounded-2xl font-bold text-lg w-[calc(100%-40px)] max-w-[440px]">
                    Ø§Ø¯Ø§Ù…Ù‡ â†’
                </button>
            </div>
        </div>
        <!-- ØµÙØ­Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ -->
        <div id="measurementsScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="showScreen('productDetailScreen')" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold">Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª</h2>
                </div>
                
                <div class="p-4 pb-24">
                    <div class="bg-blue-50 border-2 border-blue-200 rounded-2xl p-4 mb-6">
                        <p class="text-sm text-blue-800">ğŸ“ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</p>
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">Ø¯ÙˆØ± Ø³ÛŒÙ†Ù‡ (cm)</label>
                        <input type="number" id="chestSize" placeholder="Ù…Ø«Ø§Ù„: 65">
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">Ø¯ÙˆØ± Ú©Ù…Ø± (cm)</label>
                        <input type="number" id="waistSize" placeholder="Ù…Ø«Ø§Ù„: 70">
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">Ø¨Ù„Ù†Ø¯ÛŒ (cm)</label>
                        <input type="number" id="lengthSize" placeholder="Ù…Ø«Ø§Ù„: 80">
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                        <input type="text" id="fullName" placeholder="Ù…Ø«Ø§Ù„: ÙØ§Ø·Ù…Ù‡ Ø§Ø­Ù…Ø¯ÛŒ">
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³</label>
                        <input type="tel" id="phone" placeholder="09123456789">
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">Ø¢Ø¯Ø±Ø³ Ú©Ø§Ù…Ù„</label>
                        <textarea id="address" rows="3" placeholder="Ø§Ø³ØªØ§Ù†ØŒ Ø´Ù‡Ø±ØŒ Ø®ÛŒØ§Ø¨Ø§Ù†ØŒ Ú©ÙˆÚ†Ù‡ØŒ Ù¾Ù„Ø§Ú©"></textarea>
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">Ú©Ø¯ Ù¾Ø³ØªÛŒ (10 Ø±Ù‚Ù…)</label>
                        <input type="text" id="postalCode" placeholder="1234567890" maxlength="10">
                    </div>
                    
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">ğŸ Ú©Ø¯ ØªØ®ÙÛŒÙ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</label>
                        <div class="flex gap-2">
                            <input type="text" id="discountCode" placeholder="Ú©Ø¯ ØªØ®ÙÛŒÙ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" class="flex-1">
                            <button onclick="applyDiscount()" class="bg-purple-600 text-white px-6 rounded-xl font-bold btn">
                                Ø§Ø¹Ù…Ø§Ù„
                            </button>
                        </div>
                        <div id="discountMessage" class="mt-2 text-sm"></div>
                    </div>
                </div>
                
                <button onclick="showInvoice()" class="floating-btn bg-purple-600 text-white px-8 py-4 rounded-2xl font-bold text-lg w-[calc(100%-40px)] max-w-[440px]">
                    Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ§Ú©ØªÙˆØ± â†’
                </button>
            </div>
        </div>
        <!-- ØµÙØ­Ù‡ ÙØ§Ú©ØªÙˆØ± -->
        <div id="invoiceScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="showScreen('measurementsScreen')" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold">ÙØ§Ú©ØªÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ</h2>
                </div>
                
                <div class="p-4 pb-32">
                    <div id="invoiceDetails" class="invoice"></div>
                    
                    <div class="bg-yellow-50 border-2 border-yellow-200 rounded-2xl p-4 mb-6">
                        <p class="text-sm font-bold text-yellow-800 mb-2">ğŸ’³ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù¾Ø±Ø¯Ø§Ø®Øª</p>
                        <p class="text-sm text-yellow-800">Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª: <span class="font-bold" dir="ltr">6104-3389-2276-8938</span></p>
                        <p class="text-sm text-yellow-800">Ø¨Ù‡ Ù†Ø§Ù…: ÛŒØ§Ø³Ù…ÛŒÙ† Ø­ÛŒØ¯Ø±ÛŒ</p>
                    </div>
                    
                    <div class="bg-white border-2 border-gray-200 rounded-2xl p-4">
                        <p class="text-sm font-bold mb-3">ğŸ“¸ Ø¢Ù¾Ù„ÙˆØ¯ ÙÛŒØ´ ÙˆØ§Ø±ÛŒØ²ÛŒ</p>
                        <div class="file-upload">
                            <label class="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-xl font-bold cursor-pointer block text-center btn">
                                Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„
                                <input type="file" accept="image/*" id="receiptUpload" onchange="previewReceipt(this)">
                            </label>
                        </div>
                        <img id="receiptPreview" class="upload-preview hidden" alt="Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ ÙÛŒØ´">
                    </div>
                </div>
                
                <button onclick="submitOrder()" class="floating-btn bg-green-600 text-white px-8 py-4 rounded-2xl font-bold text-lg w-[calc(100%-40px)] max-w-[440px]" disabled id="submitBtn">
                    âœ… Ø«Ø¨Øª Ù†Ù‡Ø§ÛŒÛŒ Ø³ÙØ§Ø±Ø´
                </button>
            </div>
        </div>
        <!-- ØµÙØ­Ù‡ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ -->
        <div id="trackScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="showScreen('homeScreen')" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold">Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø³ÙØ§Ø±Ø´</h2>
                </div>
                
                <div class="p-4 pb-24">
                    <div class="input-group">
                        <label class="block text-sm font-bold mb-2">Ø´Ù…Ø§Ø±Ù‡ Ø³ÙØ§Ø±Ø´</label>
                        <input type="text" id="trackOrderNumber" placeholder="SH12345678">
                    </div>
                    
                    <button onclick="trackOrder()" class="w-full bg-purple-600 text-white py-4 rounded-xl font-bold text-lg btn mb-6">
                        Ø¬Ø³ØªØ¬Ùˆ
                    </button>
                    
                    <div id="trackResult"></div>
                    
                    <div class="mt-6">
                        <h3 class="text-lg font-bold mb-3">ğŸ“¦ Ø³ÙØ§Ø±Ø´Ø§Øª Ù…Ù†</h3>
                        <div id="myOrdersList"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ØµÙØ­Ù‡ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ -->
        <div id="profileScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="showScreen('homeScreen')" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold">Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ù…Ù†</h2>
                </div>
                
                <div class="p-4 pb-24">
                    <div class="bg-gradient-to-br from-purple-500 to-indigo-600 text-white rounded-2xl p-6 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <p class="text-sm opacity-90">ÙˆØ¶Ø¹ÛŒØª Ø­Ø³Ø§Ø¨</p>
                                <p class="text-2xl font-bold" id="profileStatus">ğŸ‘¤ Ú©Ø§Ø±Ø¨Ø± Ø¹Ø§Ø¯ÛŒ</p>
                            </div>
                            <div class="text-5xl">ğŸ‘‘</div>
                        </div>
                        <div class="bg-white/20 rounded-xl p-3">
                            <div class="flex justify-between text-sm mb-1">
                                <span>ğŸ’ Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§</span>
                                <span class="font-bold" id="profilePoints">0</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="profileProgress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-4" id="profileStats"></div>
                    
                    <div class="mt-6 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-2xl p-4">
                        <p class="text-sm font-bold text-gray-800 mb-2">âœ¨ Ù…Ø²Ø§ÛŒØ§ÛŒ VIP</p>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>â€¢ 20% ØªØ®ÙÛŒÙ Ø¯Ø§Ø¦Ù…ÛŒ</li>
                            <li>â€¢ Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ÛŒÚ¯Ø§Ù†</li>
                            <li>â€¢ Ø§ÙˆÙ„ÙˆÛŒØª Ø¯Ø± Ø¯ÙˆØ®Øª</li>
                            <li>â€¢ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ÙˆÛŒÚ˜Ù‡ 24/7</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- ØµÙØ­Ù‡ ØªØ®ÙÛŒÙ -->
        <div id="discountScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="showScreen('homeScreen')" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold">Ú©Ø¯Ù‡Ø§ÛŒ ØªØ®ÙÛŒÙ</h2>
                </div>
                
                <div class="p-4 pb-24">
                    <div class="space-y-4">
                        <div class="bg-gradient-to-r from-pink-100 to-purple-100 border-2 border-pink-300 rounded-2xl p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-bold text-lg">FIRST10</span>
                                <span class="bg-pink-500 text-white px-3 py-1 rounded-full text-sm font-bold">10%</span>
                            </div>
                            <p class="text-sm text-gray-700">ØªØ®ÙÛŒÙ ÙˆÛŒÚ˜Ù‡ Ø§ÙˆÙ„ÛŒÙ† Ø®Ø±ÛŒØ¯</p>
                        </div>
                        
                        <div class="bg-gradient-to-r from-purple-100 to-indigo-100 border-2 border-purple-300 rounded-2xl p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-bold text-lg">SHAHZAD20</span>
                                <span class="bg-purple-500 text-white px-3 py-1 rounded-full text-sm font-bold">20%</span>
                            </div>
                            <p class="text-sm text-gray-700">ØªØ®ÙÛŒÙ ÙˆÛŒÚ˜Ù‡ (Ù…Ø­Ø¯ÙˆØ¯)</p>
                        </div>
                        
                        <div class="bg-gradient-to-r from-yellow-100 to-orange-100 border-2 border-yellow-300 rounded-2xl p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-bold text-lg">VIP30</span>
                                <span class="bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-bold">30%</span>
                            </div>
                            <p class="text-sm text-gray-700">ÙˆÛŒÚ˜Ù‡ Ø§Ø¹Ø¶Ø§ÛŒ VIP</p>
                        </div>
                    </div>
                    
                    <div class="mt-6 bg-blue-50 border-2 border-blue-200 rounded-2xl p-4">
                        <p class="text-sm font-bold text-blue-800 mb-2">ğŸ’ Ø³ÛŒØ³ØªÙ… Ø§Ù…ØªÛŒØ§Ø²</p>
                        <p class="text-sm text-blue-700">Ø¨Ø§ Ù‡Ø± Ø®Ø±ÛŒØ¯ Ø§Ù…ØªÛŒØ§Ø² Ø¬Ù…Ø¹ Ú©Ù†ÛŒØ¯!</p>
                        <p class="text-sm text-blue-700">Ù‡Ø± 1000 ØªÙˆÙ…Ø§Ù† = 1 Ø§Ù…ØªÛŒØ§Ø²</p>
                        <p class="text-sm text-blue-700 font-bold mt-2">100 Ø§Ù…ØªÛŒØ§Ø² = 100,000 ØªÙˆÙ…Ø§Ù† ØªØ®ÙÛŒÙ</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- ØµÙØ­Ù‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ -->
        <div id="supportScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="showScreen('homeScreen')" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ</h2>
                </div>
                
                <div class="p-4 pb-24">
                    <div class="space-y-4 mb-6">
                        <a href="https://t.me/afshin_7394" target="_blank" class="block bg-gradient-to-r from-blue-500 to-cyan-600 text-white p-4 rounded-2xl btn">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-bold text-lg">ğŸ’¬ ØªÙ„Ú¯Ø±Ø§Ù…</p>
                                    <p class="text-sm opacity-90">@afshin_7394</p>
                                </div>
                                <span class="text-3xl">â†’</span>
                            </div>
                        </a>
                        
                        <a href="tel:09123456789" class="block bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 rounded-2xl btn">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-bold text-lg">ğŸ“ ØªÙ„ÙÙ†</p>
                                    <p class="text-sm opacity-90">09123456789</p>
                                </div>
                                <span class="text-3xl">â†’</span>
                            </div>
                        </a>
                        
                        <a href="https://t.me/shahzad_style" target="_blank" class="block bg-gradient-to-r from-purple-500 to-pink-600 text-white p-4 rounded-2xl btn">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-bold text-lg">ğŸ“¢ Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…</p>
                                    <p class="text-sm opacity-90">@shahzad_style</p>
                                </div>
                                <span class="text-3xl">â†’</span>
                            </div>
                        </a>
                    </div>
                    
                    <div class="bg-gray-50 rounded-2xl p-4">
                        <p class="font-bold mb-3">â° Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±ÛŒ</p>
                        <p class="text-sm text-gray-700">Ø´Ù†Ø¨Ù‡ ØªØ§ Ù¾Ù†Ø¬Ø´Ù†Ø¨Ù‡: 9 ØµØ¨Ø­ ØªØ§ 9 Ø´Ø¨</p>
                        <p class="text-sm text-gray-700">Ø¬Ù…Ø¹Ù‡: ØªØ¹Ø·ÛŒÙ„</p>
                    </div>
                    
                    <div class="mt-6 bg-blue-50 rounded-2xl p-4">
                        <p class="font-bold mb-3">â“ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„</p>
                        <div class="space-y-2 text-sm text-gray-700">
                            <p>â€¢ Ø²Ù…Ø§Ù† Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ: 3 ØªØ§ 10 Ø±ÙˆØ²</p>
                            <p>â€¢ Ø¶Ù…Ø§Ù†Øª Ú©ÛŒÙÛŒØª: 30 Ø±ÙˆØ²Ù‡</p>
                            <p>â€¢ Ø§Ù…Ú©Ø§Ù† ØªØ¹ÙˆÛŒØ¶: ØªØ§ 7 Ø±ÙˆØ²</p>
                            <p>â€¢ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø´Ù‡Ø±Ø³ØªØ§Ù†: Ø¨Ù„Ù‡ âœ…</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† -->
        <div id="adminScreen" class="screen">
            <div class="bg-white min-h-screen">
                <div class="header-gradient text-white p-4 flex items-center sticky top-0 z-50">
                    <button onclick="adminLogout()" class="ml-4 text-2xl">â†</button>
                    <h2 class="text-xl font-bold">ğŸ”§ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h2>
                </div>
                
                <div class="p-4 pb-24">
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <button onclick="showAdminOrders()" class="bg-gradient-to-br from-blue-500 to-cyan-600 text-white p-4 rounded-2xl btn">
                            <div class="text-3xl mb-2">ğŸ“‹</div>
                            <div class="font-bold text-sm">Ø³ÙØ§Ø±Ø´Ø§Øª</div>
                        </button>
                        
                        <button onclick="showDailyReport()" class="bg-gradient-to-br from-green-500 to-emerald-600 text-white p-4 rounded-2xl btn">
                            <div class="text-3xl mb-2">ğŸ’°</div>
                            <div class="font-bold text-sm">Ú¯Ø²Ø§Ø±Ø´ Ø±ÙˆØ²Ø§Ù†Ù‡</div>
                        </button>
                        
                        <button onclick="showMonthlyReport()" class="bg-gradient-to-br from-purple-500 to-indigo-600 text-white p-4 rounded-2xl btn">
                            <div class="text-3xl mb-2">ğŸ“Š</div>
                            <div class="font-bold text-sm">Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù‡Ø§Ù†Ù‡</div>
                        </button>
                        
                        <button onclick="showSalesChart()" class="bg-gradient-to-br from-pink-500 to-rose-600 text-white p-4 rounded-2xl btn">
                            <div class="text-3xl mb-2">ğŸ“ˆ</div>
                            <div class="font-bold text-sm">Ù†Ù…ÙˆØ¯Ø§Ø± ÙØ±ÙˆØ´</div>
                        </button>
                    </div>
                    
                    <div id="adminContent"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Ø§Ø¯Ù…ÛŒÙ† -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4">ğŸ” ÙˆØ±ÙˆØ¯ Ø§Ø¯Ù…ÛŒÙ†</h3>
            <div class="input-group">
                <input type="password" id="adminPassword" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
            </div>
            <div class="flex gap-3">
                <button onclick="adminLogin()" class="flex-1 bg-purple-600 text-white py-3 rounded-xl font-bold btn">
                    ÙˆØ±ÙˆØ¯
                </button>
                <button onclick="closeAdminModal()" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-bold btn">
                    Ø§Ù†ØµØ±Ø§Ù
                </button>
            </div>
        </div>
    </div>
    <!-- Modal ØªØ§ÛŒÛŒØ¯ Ø³ÙØ§Ø±Ø´ -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4">âœ… ØªØ§ÛŒÛŒØ¯ Ø³ÙØ§Ø±Ø´</h3>
            <div id="confirmOrderDetails" class="mb-4"></div>
            <div class="input-group">
                <label class="block text-sm font-bold mb-2">Ù‡Ø²ÛŒÙ†Ù‡ Ù¾Ø§Ø±Ú†Ù‡ (ØªÙˆÙ…Ø§Ù†)</label>
                <input type="number" id="fabricCost" placeholder="Ù…Ø«Ø§Ù„: 800000">
            </div>
            <div class="input-group">
                <label class="block text-sm font-bold mb-2">Ù‡Ø²ÛŒÙ†Ù‡ Ø®ÛŒØ§Ø·ÛŒ (ØªÙˆÙ…Ø§Ù†)</label>
                <input type="number" id="tailoringCost" placeholder="Ù…Ø«Ø§Ù„: 300000">
            </div>
            <div class="flex gap-3">
                <button onclick="confirmOrder()" class="flex-1 bg-green-600 text-white py-3 rounded-xl font-bold btn">
                    ØªØ§ÛŒÛŒØ¯ Ùˆ Ø«Ø¨Øª
                </button>
                <button onclick="closeConfirmModal()" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-bold btn">
                    Ø§Ù†ØµØ±Ø§Ù
                </button>
            </div>
        </div>
    </div>
    <!-- Install Prompt -->
    <div id="installPrompt" class="install-prompt">
        <p class="font-bold mb-2">Ù†ØµØ¨ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†</p>
        <p class="text-sm text-gray-600 mb-3">Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¢Ø³Ø§Ù†â€ŒØªØ±ØŒ Ø§Ù¾ Ø±Ø§ Ù†ØµØ¨ Ú©Ù†ÛŒØ¯</p>
        <div class="flex gap-2">
            <button onclick="installApp()" class="flex-1 bg-purple-600 text-white py-2 px-4 rounded-xl font-bold text-sm btn">
                Ù†ØµØ¨
            </button>
            <button onclick="dismissInstall()" class="flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-xl font-bold text-sm btn">
                Ø¨Ø¹Ø¯Ø§
            </button>
        </div>
    </div>
    <script>
        // Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ
        const storage = {
            products: {
                crop_set: {
                    name: 'Ú©Ø±Ø§Ù¾ Ùˆ Ø´Ù„ÙˆØ§Ø± Ù†Ú¯ÛŒÙ† Ø¯Ø§Ø±',
                    emoji: 'ğŸ‘—',
                    sizes: {
                        '1-5': {price: 1498000, stock: 10},
                        '6-8': {price: 1550000, stock: 8},
                        '9-10': {price: 1598000, stock: 5},
                        '11-13': {price: 1650000, stock: 12},
                        'mother': {price: 1950000, stock: 6, label: 'Ø³Øª Ù…Ø§Ø¯Ø±'}
                    }
                },
                dress: {
                    name: 'Ù¾ÛŒØ±Ø§Ù‡Ù† Ù…Ø¬Ù„Ø³ÛŒ',
                    emoji: 'ğŸ‘š',
                    sizes: {
                        '1-5': {price: 1850000, stock: 7},
                        '6-8': {price: 1950000, stock: 9},
                        '9-10': {price: 2050000, stock: 4},
                        '11-13': {price: 2150000, stock: 8}
                    }
                }
            },
            discounts: {
                'SHAHZAD20': {percent: 20, maxUses: 100, uses: 0},
                'VIP30': {percent: 30, maxUses: 50, uses: 0},
                'FIRST10': {percent: 10, maxUses: -1, uses: 0}
            }
        };
        let currentOrder = {
            productId: null,
            productName: null,
            size: null,
            sizeLabel: null,
            price: 0,
            color: null,
            shipping: 'Ø¹Ø§Ø¯ÛŒ',
            shippingCost: 0,
            post: null,
            postCost: 0,
            discount: 0,
            discountCode: null
        };
        let userProfile = JSON.parse(localStorage.getItem('userProfile')) || {
            userId: 'U' + Date.now(),
            points: 0,
            totalSpent: 0,
            totalOrders: 0,
            isVip: false,
            joinDate: new Date().toISOString()
        };
        let allOrders = JSON.parse(localStorage.getItem('allOrders')) || [];
        let pendingOrder = null;
        // PWA Install
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').style.display = 'block';
        });
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    deferredPrompt = null;
                    document.getElementById('installPrompt').style.display = 'none';
                });
            }
        }
        function dismissInstall() {
            document.getElementById('installPrompt').style.display = 'none';
        }
        // Navigation
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            window.scrollTo(0, 0);
            
            if (screenId === 'homeScreen') {
                updateProfile();
            } else if (screenId === 'shopScreen') {
                loadProducts();
            } else if (screenId === 'trackScreen') {
                loadMyOrders();
            } else if (screenId === 'profileScreen') {
                loadProfileDetails();
            }
        }
        // Profile
        function updateProfile() {
            document.getElementById('userPoints').textContent = userProfile.points.toLocaleString();
            
            const vipThreshold = 10000000;
            const progress = Math.min((userProfile.totalSpent / vipThreshold) * 100, 100);
            document.getElementById('vipProgress').style.width = progress + '%';
            
            if (userProfile.isVip) {
                document.getElementById('vipStatus').textContent = 'â­ Ø´Ù…Ø§ Ø¹Ø¶Ùˆ VIP Ù‡Ø³ØªÛŒØ¯!';
                document.getElementById('vipBadge').classList.remove('hidden');
            } else {
                const remaining = vipThreshold - userProfile.totalSpent;
                document.getElementById('vipStatus').textContent = `ØªØ§ VIP: ${remaining.toLocaleString()} ØªÙˆÙ…Ø§Ù†`;
            }
            
            saveUserProfile();
        }
        function saveUserProfile() {
            localStorage.setItem('userProfile', JSON.stringify(userProfile));
        }
        function loadProfileDetails() {
            document.getElementById('profileStatus').textContent = userProfile.isVip ? 'â­ Ø¹Ø¶Ùˆ VIP' : 'ğŸ‘¤ Ú©Ø§Ø±Ø¨Ø± Ø¹Ø§Ø¯ÛŒ';
            document.getElementById('profilePoints').textContent = userProfile.points.toLocaleString();
            
            const progress = Math.min((userProfile.totalSpent / 10000000) * 100, 100);
            document.getElementById('profileProgress').style.width = progress + '%';
            
            const statsHtml = `
                <div class="bg-white rounded-2xl p-4 shadow-sm">
                    <div class="flex justify-between items-center py-2">
                        <span class="text-gray-600">ğŸ› ØªØ¹Ø¯Ø§Ø¯ Ø®Ø±ÛŒØ¯</span>
                        <span class="font-bold">${userProfile.totalOrders}</span>
                    </div>
                    <div class="flex justify-between items-center py-2 border-t">
                        <span class="text-gray-600">ğŸ’° Ù…Ø¬Ù…ÙˆØ¹ Ø®Ø±ÛŒØ¯</span>
                        <span class="font-bold">${userProfile.totalSpent.toLocaleString()} Øª</span>
                    </div>
                    <div class="flex justify-between items-center py-2 border-t">
                        <span class="text-gray-600">ğŸ’ Ø§Ù…ØªÛŒØ§Ø²</span>
                        <span class="font-bold">${userProfile.points.toLocaleString()}</span>
                    </div>
                    <div class="flex justify-between items-center py-2 border-t">
                        <span class="text-gray-600">ğŸ“… Ø¹Ø¶ÙˆÛŒØª</span>
                        <span class="font-bold">${new Date(userProfile.joinDate).toLocaleDateString('fa-IR')}</span>
                    </div>
                </div>
            `;
            document.getElementById('profileStats').innerHTML = statsHtml;
        }
        // Products
        function loadProducts() {
            let html = '';
            for (let id in storage.products) {
                const product = storage.products[id];
                html += `
                    <div class="product-card bg-white rounded-2xl p-4 shadow-lg" onclick="selectProduct('${id}')">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div class="text-5xl">${product.emoji}</div>
                                <div>
                                    <h3 class="font-bold text-lg">${product.name}</h3>
                                    <p class="text-sm text-gray-600">Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± ${Object.keys(product.sizes).length} Ø³Ø§ÛŒØ²</p>
                                </div>
                            </div>
                            <span class="text-2xl">â†</span>
                        </div>
                    </div>
                `;
            }
            document.getElementById('productList').innerHTML = html;
        }
        function selectProduct(productId) {
            currentOrder.productId = productId;
            currentOrder.productName = storage.products[productId].name;
            document.getElementById('productDetailTitle').textContent = storage.products[productId].name;
            loadSizes();
            showScreen('productDetailScreen');
        }
        function loadSizes() {
            const product = storage.products[currentOrder.productId];
            let html = '';
            for (let size in product.sizes) {
                const item = product.sizes[size];
                const label = item.label || `${size} Ø³Ø§Ù„`;
                const available = item.stock > 0;
                html += `
                    <div class="size-option ${!available ? 'unavailable' : ''}" 
                         onclick="${available ? `selectSize('${size}', '${label}', ${item.price})` : ''}">
                        <div class="font-bold">${label}</div>
                        <div class="text-sm text-gray-600">${item.price.toLocaleString()} Øª</div>
                        <div class="text-xs ${available ? 'text-green-600' : 'text-red-600'}">
                            ${available ? `Ù…ÙˆØ¬ÙˆØ¯ (${item.stock})` : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}
                        </div>
                    </div>
                `;
            }
            document.getElementById('sizeGrid').innerHTML = html;
        }
        function selectSize(size, label, price) {
            document.querySelectorAll('.size-option').forEach(el => el.classList.remove('selected'));
            event.target.closest('.size-option').classList.add('selected');
            currentOrder.size = size;
            currentOrder.sizeLabel = label;
            currentOrder.price = price;
        }
        function selectColor(color, element) {
            document.querySelectorAll('.color-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            currentOrder.color = color;
        }
        function selectShipping(type, cost, element) {
            document.querySelectorAll('.shipping-option').forEach(el => {
                el.classList.remove('border-purple-600');
                el.classList.add('border-gray-200');
            });
            element.classList.remove('border-gray-200');
            element.classList.add('border-purple-600');
            currentOrder.shipping = type;
            currentOrder.shippingCost = cost;
        }
        function selectPost(type, cost, element) {
            document.querySelectorAll('.post-option').forEach(el => {
                el.classList.remove('border-purple-600');
                el.classList.add('border-gray-200');
            });
            element.classList.remove('border-gray-200');
            element.classList.add('border-purple-600');
            currentOrder.post = type;
            currentOrder.postCost = cost;
        }
        function continueToMeasurements() {
            if (!currentOrder.size) {
                alert('Ù„Ø·ÙØ§ Ø³Ø§ÛŒØ² Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            if (!currentOrder.color) {
                alert('Ù„Ø·ÙØ§ Ø±Ù†Ú¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            if (!currentOrder.post) {
                alert('Ù„Ø·ÙØ§ Ù†ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯');
                return;
            }
            showScreen('measurementsScreen');
        }
        function applyDiscount() {
            const code = document.getElementById('discountCode').value.toUpperCase();
            const msg = document.getElementById('discountMessage');
            
            if (!code) {
                msg.innerHTML = '<span class="text-red-600">âŒ Ú©Ø¯ ØªØ®ÙÛŒÙ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</span>';
                return;
            }
            
            const discount = storage.discounts[code];
            if (discount && (discount.maxUses === -1 || discount.uses < discount.maxUses)) {
                const amount = Math.floor((currentOrder.price + currentOrder.shippingCost) * discount.percent / 100);
                currentOrder.discount = amount;
                currentOrder.discountCode = code;
                msg.innerHTML = `<span class="text-green-600">âœ… ${discount.percent}% ØªØ®ÙÛŒÙ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯ (${amount.toLocaleString()} Øª)</span>`;
            } else {
                msg.innerHTML = '<span class="text-red-600">âŒ Ú©Ø¯ ØªØ®ÙÛŒÙ Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ Ù…Ù†Ù‚Ø¶ÛŒ Ø´Ø¯Ù‡</span>';
            }
        }
        function showInvoice() {
            const chest = document.getElementById('chestSize').value;
            const waist = document.getElementById('waistSize').value;
            const length = document.getElementById('lengthSize').value;
            const fullName = document.getElementById('fullName').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const postalCode = document.getElementById('postalCode').value;
            
            if (!chest || !waist || !length) {
                alert('Ù„Ø·ÙØ§ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÙ‡Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            if (!fullName || !phone || !address || !postalCode) {
                alert('Ù„Ø·ÙØ§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ø±Ø§ Ú©Ø§Ù…Ù„ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            if (postalCode.length !== 10) {
                alert('Ú©Ø¯ Ù¾Ø³ØªÛŒ Ø¨Ø§ÛŒØ¯ 10 Ø±Ù‚Ù… Ø¨Ø§Ø´Ø¯');
                return;
            }
            
            const subtotal = currentOrder.price + currentOrder.shippingCost + currentOrder.postCost;
            const total = subtotal - currentOrder.discount;
            const points = Math.floor(total / 1000);
            
            let html = `
                <div class="invoice-row">
                    <span>Ù…Ø­ØµÙˆÙ„</span>
                    <span class="font-bold">${currentOrder.productName}</span>
                </div>
                <div class="invoice-row">
                    <span>Ø³Ø§ÛŒØ²</span>
                    <span>${currentOrder.sizeLabel}</span>
                </div>
                <div class="invoice-row">
                    <span>Ø±Ù†Ú¯</span>
                    <span>${currentOrder.color}</span>
                </div>
                <div class="invoice-row">
                    <span>Ø§Ù†Ø¯Ø§Ø²Ù‡ (Ø³ÛŒÙ†Ù‡-Ú©Ù…Ø±-Ø¨Ù„Ù†Ø¯ÛŒ)</span>
                    <span>${chest}-${waist}-${length}</span>
                </div>
                <div class="invoice-row">
                    <span>Ù†ÙˆØ¹ Ø¯ÙˆØ®Øª</span>
                    <span>${currentOrder.shipping}</span>
                </div>
                <div class="invoice-row">
                    <span>Ù†ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„</span>
                    <span>${currentOrder.post}</span>
                </div>
                <div class="invoice-row">
                    <span>Ù‚ÛŒÙ…Øª Ù…Ø­ØµÙˆÙ„</span>
                    <span>${currentOrder.price.toLocaleString()} Øª</span>
                </div>
            `;
            
            if (currentOrder.shippingCost > 0) {
                html += `
                    <div class="invoice-row">
                        <span>Ù‡Ø²ÛŒÙ†Ù‡ Ø¯ÙˆØ®Øª ÙÙˆØ±ÛŒ</span>
                        <span>${currentOrder.shippingCost.toLocaleString()} Øª</span>
                    </div>
                `;
            }
            
            if (currentOrder.postCost > 0) {
                html += `
                    <div class="invoice-row">
                        <span>Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø±Ø³Ø§Ù„</span>
                        <span>${currentOrder.postCost.toLocaleString()} Øª</span>
                    </div>
                `;
            }
            
            if (currentOrder.discount > 0) {
                html += `
                    <div class="invoice-row">
                        <span>ØªØ®ÙÛŒÙ (${currentOrder.discountCode})</span>
                        <span class="text-green-600">-${currentOrder.discount.toLocaleString()} Øª</span>
                    </div>
                `;
            }
            
            html += `
                <div class="invoice-row total">
                    <span>Ù…Ø¨Ù„Øº Ù†Ù‡Ø§ÛŒÛŒ</span>
                    <span>${total.toLocaleString()} Øª</span>
                </div>
                <div class="invoice-row">
                    <span>Ø§Ù…ØªÛŒØ§Ø² Ø§ÛŒÙ† Ø®Ø±ÛŒØ¯</span>
                    <span class="text-purple-600 font-bold">ğŸ’ ${points}</span>
                </div>
            `;
            
            document.getElementById('invoiceDetails').innerHTML = html;
            pendingOrder = {
                ...currentOrder,
                measurements: {chest, waist, length},
                customerInfo: {fullName, phone, address, postalCode},
                total,
                points
            };
            
            showScreen('invoiceScreen');
        }
        function previewReceipt(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('receiptPreview');
                    preview.src = e.target.result;
                    preview.classList.remove('hidden');
                    document.getElementById('submitBtn').disabled = false;
                    document.getElementById('submitBtn').classList.remove('opacity-50');
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        function submitOrder() {
            const receipt = document.getElementById('receiptUpload').files[0];
            if (!receipt) {
                alert('Ù„Ø·ÙØ§ ÙÛŒØ´ ÙˆØ§Ø±ÛŒØ²ÛŒ Ø±Ø§ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const orderNumber = 'SH' + Date.now().toString().slice(-8);
            const order = {
                ...pendingOrder,
                orderNumber,
                userId: userProfile.userId,
                status: 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯',
                date: new Date().toISOString(),
                receipt: document.getElementById('receiptPreview').src
            };
            
            allOrders.push(order);
            localStorage.setItem('allOrders', JSON.stringify(allOrders));
            
            // Update user stats
            userProfile.totalOrders++;
            saveUserProfile();
            
            alert(`âœ… Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ ${orderNumber} Ø«Ø¨Øª Ø´Ø¯!\n\nğŸ“‹ ÙˆØ¶Ø¹ÛŒØª: Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯\n\nâ° Ù¾Ø³ Ø§Ø² Ø¨Ø±Ø±Ø³ÛŒØŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯`);
            
            // Reset
            currentOrder = {
                productId: null,
                productName: null,
                size: null,
                sizeLabel: null,
                price: 0,
                color: null,
                shipping: 'Ø¹Ø§Ø¯ÛŒ',
                shippingCost: 0,
                post: null,
                postCost: 0,
                discount: 0,
                discountCode: null
            };
            pendingOrder = null;
            
            showScreen('homeScreen');
        }
        // Track Order
        function trackOrder() {
            const orderNum = document.getElementById('trackOrderNumber').value;
            if (!orderNum) {
                alert('Ø´Ù…Ø§Ø±Ù‡ Ø³ÙØ§Ø±Ø´ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const order = allOrders.find(o => o.orderNumber === orderNum);
            if (order) {
                displayOrderDetails(order);
            } else {
                document.getElementById('trackResult').innerHTML = `
                    <div class="bg-red-50 border-2 border-red-200 rounded-2xl p-4 text-center">
                        <p class="text-red-800 font-bold">âŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯</p>
                    </div>
                `;
            }
        }
        function displayOrderDetails(order) {
            const statusClass = order.status === 'ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡' ? 'status-confirmed' : 
                              order.status === 'Ø±Ø¯ Ø´Ø¯Ù‡' ? 'status-rejected' : 'status-pending';
            
            document.getElementById('trackResult').innerHTML = `
                <div class="bg-white border-2 border-purple-200 rounded-2xl p-4">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="font-bold text-lg">Ø³ÙØ§Ø±Ø´ #${order.orderNumber}</h4>
                        <span class="status-badge ${statusClass}">${order.status}</span>
                    </div>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">ğŸ“¦ Ù…Ø­ØµÙˆÙ„</span>
                            <span class="font-bold">${order.productName}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ğŸ“… ØªØ§Ø±ÛŒØ®</span>
                            <span>${new Date(order.date).toLocaleDateString('fa-IR')}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ğŸ’° Ù…Ø¨Ù„Øº</span>
                            <span class="font-bold">${order.total.toLocaleString()} Øª</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ğŸ¨ Ø±Ù†Ú¯</span>
                            <span>${order.color}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">ğŸ“ Ø³Ø§ÛŒØ²</span>
                            <span>${order.sizeLabel}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        function loadMyOrders() {
            const myOrders = allOrders.filter(o => o.userId === userProfile.userId);
            
            if (myOrders.length === 0) {
                document.getElementById('myOrdersList').innerHTML = `
                    <div class="bg-gray-50 rounded-2xl p-8 text-center text-gray-500">
                        <div class="text-5xl mb-3">ğŸ“¦</div>
                        <p>Ù‡Ù†ÙˆØ² Ø³ÙØ§Ø±Ø´ÛŒ Ø«Ø¨Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            myOrders.reverse().forEach(order => {
                const statusClass = order.status === 'ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡' ? 'status-confirmed' : 
                                  order.status === 'Ø±Ø¯ Ø´Ø¯Ù‡' ? 'status-rejected' : 'status-pending';
                html += `
                    <div class="order-item">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-bold">#{order.orderNumber}</span>
                            <span class="status-badge ${statusClass}">${order.status}</span>
                        </div>
                        <div class="text-sm text-gray-600">
                            <p>${order.productName} - ${order.sizeLabel}</p>
                            <p class="font-bold text-gray-800 mt-1">${order.total.toLocaleString()} ØªÙˆÙ…Ø§Ù†</p>
                        </div>
                    </div>
                `;
            });
            document.getElementById('myOrdersList').innerHTML = html;
        }
        // Admin Panel
        let adminClicks = 0;
        let adminClickTimeout;
        
        function adminClickCounter() {
            adminClicks++;
            clearTimeout(adminClickTimeout);
            
            if (adminClicks >= 5) {
                adminClicks = 0;
                document.getElementById('adminModal').classList.add('active');
            }
            
            adminClickTimeout = setTimeout(() => {
                adminClicks = 0;
            }, 2000);
        }
        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'admin123') {
                closeAdminModal();
                showScreen('adminScreen');
                showAdminOrders();
            } else {
                alert('Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
            }
        }
        function closeAdminModal() {
            document.getElementById('adminModal').classList.remove('active');
            document.getElementById('adminPassword').value = '';
        }
        function adminLogout() {
            showScreen('homeScreen');
        }
        function showAdminOrders() {
            const pending = allOrders.filter(o => o.status === 'Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯');
            
            if (pending.length === 0) {
                document.getElementById('adminContent').innerHTML = `
                    <div class="bg-green-50 border-2 border-green-200 rounded-2xl p-8 text-center">
                        <div class="text-5xl mb-3">âœ…</div>
                        <p class="font-bold text-green-800">Ù‡ÛŒÚ† Ø³ÙØ§Ø±Ø´ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                    </div>
                `;
                return;
            }
            
            let html = '<h3 class="text-lg font-bold mb-4">ğŸ“‹ Ø³ÙØ§Ø±Ø´Ø§Øª Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯</h3>';
            pending.forEach((order, index) => {
                html += `
                    <div class="order-item mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <span class="font-bold">#{order.orderNumber}</span>
                            <span class="text-sm text-gray-600">${new Date(order.date).toLocaleDateString('fa-IR')}</span>
                        </div>
                        <div class="text-sm space-y-1 mb-3">
                            <p>ğŸ“¦ Ù…Ø­ØµÙˆÙ„: ${order.productName}</p>
                            <p>ğŸ“ Ø³Ø§ÛŒØ²: ${order.sizeLabel} | ğŸ¨ Ø±Ù†Ú¯: ${order.color}</p>
                            <p>ğŸ“ Ø§Ù†Ø¯Ø§Ø²Ù‡: ${order.measurements.chest}-${order.measurements.waist}-${order.measurements.length}</p>
                            <p>ğŸ’° Ù…Ø¨Ù„Øº: ${order.total.toLocaleString()} ØªÙˆÙ…Ø§Ù†</p>
                        </div>
                        <img src="${order.receipt}" class="w-full rounded-xl mb-3" alt="ÙÛŒØ´">
                        <div class="flex gap-2">
                            <button onclick="openConfirmModal('${order.orderNumber}')" class="flex-1 bg-green-600 text-white py-2 rounded-xl font-bold btn">
                                âœ… ØªØ§ÛŒÛŒØ¯
                            </button>
                            <button onclick="rejectOrder('${order.orderNumber}')" class="flex-1 bg-red-600 text-white py-2 rounded-xl font-bold btn">
                                âŒ Ø±Ø¯
                            </button>
                        </div>
                    </div>
                `;
            });
            document.getElementById('adminContent').innerHTML = html;
        }
        let confirmingOrder = null;
        function openConfirmModal(orderNumber) {
            confirmingOrder = orderNumber;
            const order = allOrders.find(o => o.orderNumber === orderNumber);
            document.getElementById('confirmOrderDetails').innerHTML = `
                <p class="text-sm"><strong>Ø³ÙØ§Ø±Ø´:</strong> #${orderNumber}</p>
                <p class="text-sm"><strong>Ù…Ø¨Ù„Øº ÙØ±ÙˆØ´:</strong> ${order.total.toLocaleString()} Øª</p>
            `;
            document.getElementById('confirmModal').classList.add('active');
        }
        function closeConfirmModal() {
            document.getElementById('confirmModal').classList.remove('active');
            document.getElementById('fabricCost').value = '';
            document.getElementById('tailoringCost').value = '';
            confirmingOrder = null;
        }
        function confirmOrder() {
            const fabricCost = parseInt(document.getElementById('fabricCost').value);
            const tailoringCost = parseInt(document.getElementById('tailoringCost').value);
            
            if (!fabricCost || !tailoringCost) {
                alert('Ù„Ø·ÙØ§ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
                return;
            }
            
            const order = allOrders.find(o => o.orderNumber === confirmingOrder);
            order.status = 'ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡';
            order.costs = {
                fabric: fabricCost,
                tailoring: tailoringCost,
                total: fabricCost + tailoringCost,
                profit: order.total - (fabricCost + tailoringCost)
            };
            
            // Update user stats
            const user = userProfile.userId === order.userId ? userProfile : null;
            if (user) {
                user.totalSpent += order.total;
                user.points += order.points;
                if (user.totalSpent >= 10000000) {
                    user.isVip = true;
                }
                saveUserProfile();
            }
            
            localStorage.setItem('allOrders', JSON.stringify(allOrders));
            closeConfirmModal();
            
            alert(`âœ… Ø³ÙØ§Ø±Ø´ ØªØ§ÛŒÛŒØ¯ Ø´Ø¯!\n\nğŸ’° Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ: ${order.costs.profit.toLocaleString()} ØªÙˆÙ…Ø§Ù†`);
            showAdminOrders();
        }
        function rejectOrder(orderNumber) {
            if (!confirm('Ø¢ÛŒØ§ Ø§Ø² Ø±Ø¯ Ø§ÛŒÙ† Ø³ÙØ§Ø±Ø´ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')) return;
            
            const order = allOrders.find(o => o.orderNumber === orderNumber);
            order.status = 'Ø±Ø¯ Ø´Ø¯Ù‡';
            localStorage.setItem('allOrders', JSON.stringify(allOrders));
            
            alert('âŒ Ø³ÙØ§Ø±Ø´ Ø±Ø¯ Ø´Ø¯');
            showAdminOrders();
        }
        function showDailyReport() {
            const today = new Date().toDateString();
            const todayOrders = allOrders.filter(o => {
                const orderDate = new Date(o.date).toDateString();
                return orderDate === today && o.status === 'ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡';
            });
            
            let totalRevenue = 0;
            let totalCost = 0;
            let totalProfit = 0;
            
            todayOrders.forEach(order => {
                if (order.costs) {
                    totalRevenue += order.total;
                    totalCost += order.costs.total;
                    totalProfit += order.costs.profit;
                }
            });
            
            const margin = totalRevenue > 0 ? Math.round((totalProfit / totalRevenue) * 100) : 0;
            
            document.getElementById('adminContent').innerHTML = `
                <h3 class="text-lg font-bold mb-4">ğŸ’° Ú¯Ø²Ø§Ø±Ø´ Ù…Ø§Ù„ÛŒ Ø§Ù…Ø±ÙˆØ²</h3>
                <div class="admin-stat">
                    <div class="flex justify-between py-2">
                        <span class="text-gray-600">ğŸ“¦ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ§Ø±Ø´</span>
                        <span class="font-bold">${todayOrders.length}</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">ğŸ’µ ÙØ±ÙˆØ´</span>
                        <span class="font-bold">${totalRevenue.toLocaleString()} Øª</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">ğŸ’¸ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</span>
                        <span class="font-bold text-red-600">${totalCost.toLocaleString()} Øª</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">ğŸ’° Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ</span>
                        <span class="font-bold text-green-600">${totalProfit.toLocaleString()} Øª</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">ğŸ“ˆ Ø­Ø§Ø´ÛŒÙ‡ Ø³ÙˆØ¯</span>
                        <span class="font-bold text-purple-600">${margin}%</span>
                    </div>
                </div>
            `;
        }
        function showMonthlyReport() {
            const now = new Date();
            const thisMonth = now.getMonth();
            const thisYear = now.getFullYear();
            
            const monthOrders = allOrders.filter(o => {
                const orderDate = new Date(o.date);
                return orderDate.getMonth() === thisMonth && 
                       orderDate.getFullYear() === thisYear && 
                       o.status === 'ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡';
            });
            
            let totalRevenue = 0;
            let totalCost = 0;
            let totalProfit = 0;
            
            monthOrders.forEach(order => {
                if (order.costs) {
                    totalRevenue += order.total;
                    totalCost += order.costs.total;
                    totalProfit += order.costs.profit;
                }
            });
            
            const avgRevenue = monthOrders.length > 0 ? Math.round(totalRevenue / monthOrders.length) : 0;
            const avgProfit = monthOrders.length > 0 ? Math.round(totalProfit / monthOrders.length) : 0;
            const margin = totalRevenue > 0 ? Math.round((totalProfit / totalRevenue) * 100) : 0;
            
            const monthName = now.toLocaleDateString('fa-IR', {month: 'long', year: 'numeric'});
            
            document.getElementById('adminContent').innerHTML = `
                <h3 class="text-lg font-bold mb-4">ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ ${monthName}</h3>
                <div class="admin-stat">
                    <div class="flex justify-between py-2">
                        <span class="text-gray-600">ğŸ“¦ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ§Ø±Ø´</span>
                        <span class="font-bold">${monthOrders.length}</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">ğŸ’µ ÙØ±ÙˆØ´ Ú©Ù„</span>
                        <span class="font-bold">${totalRevenue.toLocaleString()} Øª</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">ğŸ’¸ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</span>
                        <span class="font-bold text-red-600">${totalCost.toLocaleString()} Øª</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">ğŸ’° Ø³ÙˆØ¯ Ø®Ø§Ù„Øµ</span>
                        <span class="font-bold text-green-600">${totalProfit.toLocaleString()} Øª</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">ğŸ“ˆ Ø­Ø§Ø´ÛŒÙ‡ Ø³ÙˆØ¯</span>
                        <span class="font-bold text-purple-600">${margin}%</span>
                    </div>
                </div>
                <div class="admin-stat mt-4">
                    <p class="font-bold mb-3">ğŸ“Š Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†â€ŒÙ‡Ø§</p>
                    <div class="flex justify-between py-2">
                        <span class="text-gray-600">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ÙØ±ÙˆØ´</span>
                        <span class="font-bold">${avgRevenue.toLocaleString()} Øª</span>
                    </div>
                    <div class="flex justify-between py-2 border-t">
                        <span class="text-gray-600">Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø³ÙˆØ¯</span>
                        <span class="font-bold text-green-600">${avgProfit.toLocaleString()} Øª</span>
                    </div>
                </div>
            `;
        }
        function showSalesChart() {
            let html = '<h3 class="text-lg font-bold mb-4">ğŸ“ˆ Ù†Ù…ÙˆØ¯Ø§Ø± ÙØ±ÙˆØ´ 7 Ø±ÙˆØ²</h3>';
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const dateStr = date.toDateString();
                
                const dayOrders = allOrders.filter(o => {
                    return new Date(o.date).toDateString() === dateStr && o.status === 'ØªØ§ÛŒÛŒØ¯ Ø´Ø¯Ù‡';
                });
                
                let revenue = 0;
                dayOrders.forEach(o => revenue += o.total);
                
                const dayName = date.toLocaleDateString('fa-IR', {weekday: 'long'});
                const barWidth = Math.min((revenue / 100000) * 10, 100);
                
                html += `
                    <div class="mb-4">
                        <div class="flex justify-between text-sm mb-1">
                            <span>${dayName}</span>
                            <span class="font-bold">${revenue.toLocaleString()} Øª</span>
                        </div>
                        <div class="bg-gray-200 rounded-full h-6 overflow-hidden">
                            <div class="bg-gradient-to-r from-purple-500 to-indigo-600 h-full rounded-full transition-all" style="width: ${barWidth}%"></div>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById('adminContent').innerHTML = html;
        }
        // Initialize
        updateProfile();
    </script>
</body>
</html>
